<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/static/content/site.css" />
</head>
<body>
	<div class="" id="loader"></div>
	<div class="container">
		<form id="formId" name="formId">
			<div class="form-row">
				<div class="form-group col-md-12">
					<center><h1>Diabetic Prediction based on Patient BMI</h1></center>
				</div>
			</div>
			<div class="form-row">
				<div class="form-group col-md-12">
					<h3>Patient Details Form</h3>
				</div>
			</div>
			<div class="form-row">
				<div class="form-group col-md-4">
					<label for="pname">Name</label><i class="invalid">*</i>
					<input type="name" class="form-control" tabindex="0" id="pname" placeholder="Please enter patient name">
					<span class="display-none invalid">Please enter a valid name.</span>
				</div>
			</div>
            <div class="form-row">
				<div class="form-group col-md-4">
					<label for="gender">Gender</label><i class="invalid">*</i>
					<select name="gender" class="form-control" tabindex="1"  id="gender">
                        <option>Select</option>
                        <option value="0">Female</option>
						<option value="1">Male</option>
						<option value="2">Other</option>
                    </select>
					<span class="display-none invalid">Please select a value.</span>
				</div>
			</div>
			<div class="form-row">
				<div class="form-group col-md-4">
					<label for="age">Age</label><i class="invalid">*</i>
					<input type="number" class="form-control" id="age" tabindex="2"  placeholder="Please enter patient age">
					<span class="display-none invalid">Please enter a valid number.</span>
				</div>
			</div>
			<div class="form-row">
				<div class="form-group col-md-4">
					<label for="hypertension">Hypertension</label><i class="invalid">*</i>
					<select name="hypertension" class="form-control" tabindex="3"  id="hypertension">
                        <option>Select</option>
                        <option value="1">Yes</option>
                        <option value="0">No</option>
                    </select>
					<span class="display-none invalid">Please select a value.</span>
				</div>
			</div>
            <div class="form-row">
				<div class="form-group col-md-4">
					<label for="heartdisease">Heart Disease</label><i class="invalid">*</i>
					<select name="heartdisease" class="form-control"  id="heartdisease">
                        <option>Select</option>
                        <option value="1">Yes</option>
                        <option value="0">No</option>
                    </select>
					<span class="display-none invalid">Please select a value.</span>
				</div>
			</div>
            <div class="form-row">
				<div class="form-group col-md-4">
					<label for="smoking">Smoking</label><i class="invalid">*</i>
					<select name="smoking" class="form-control"  id="smoking">
                        <option>Select</option>
                        <option value="0">Never</option>
                        <option value="1">Ever</option>
                        <option value="2">Former</option>
                        <option value="3">No-Info</option>
                        <option value="4">Current</option>
                        <option value="5">Not-Current</option>
                    </select>
					<span class="display-none invalid">Please select a value.</span>
				</div>
			</div>
			<div class="form-row">
				<div class="form-group col-md-4">
					<label for="bmi">BMI (Body Mass Index)</label><i class="invalid">*</i>
                    <input type="number" class="form-control" id="bmi" step="0.01" placeholder="Please enter BMI">
					<span class="display-none invalid">Please enter the bmi value</span>
				</div>
			</div>
            <div class="form-row">
				<div class="form-group col-md-4">
					<label for="hemoglobin">Hemoglobin A1c</label><i class="invalid">*</i>
                    <input type="number" class="form-control" id="hemoglobin" step="0.1" placeholder="Please enter the hemoglobin">
					<span class="display-none invalid">Please enter the hemoglobin value</span>
				</div>
			</div>
            <div class="form-row">
				<div class="form-group col-md-4">
					<label for="glucose">Blood glucose level</label><i class="invalid">*</i>
                    <input type="number" class="form-control" id="glucose" placeholder="Please enter the blood glucose">
					<span class="display-none invalid">Please enter the hemoglobin value</span>
				</div>
			</div>
			<div class="form-row">
				<div class="form-group col-md-2">
					<button id="trigger" type="button" disabled class="btn btn-primary submit">Submit</button>
				</div>
			</div>
			<div class="form-row">
				<div class="form-group col-md-2">
				</div>
				<div class="form-group col-md-6">
					<div><p id="validation" class="display-none"> Please correct/fill out all the fields mentioned *.</p></div>
				</div>
			</div>
		</form>
	</div>
	<script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
	<script>
		$(document).ready(function () {
			var form = document.getElementById("formId");

			function SFMCEmailAPI() {
				let pname = document.forms["formId"]["pname"].value;
				let gender = document.forms["formId"]["gender"].value;
				let age = document.forms["formId"]["age"].value;
				let hypertension = document.forms["formId"]["hypertension"].value;
				let heartDisease = document.forms["formId"]["heartdisease"].value;
				let smoking = document.forms["formId"]["smoking"].value;
				let bmi = document.forms["formId"]["bmi"].value;
				let hemoglobin = document.forms["formId"]["hemoglobin"].value;
				let glucose = document.forms["formId"]["glucose"].value;

				$.ajax({
					url: location.href+"api/diabeticprediction",
					type: "POST",
					data: JSON.stringify({
						"pname": pname,
						"gender": gender,
						"age": age,
						"hypertension": hypertension,
						"heartDisease": heartDisease,
						"smoking": smoking,
						"bmi": bmi,
						"hemoglobin": hemoglobin,
						"glucose": glucose
					}),
					headers: {
						"Content-Type": "application/json"
					},
					success: function (data, textStatus, jqXHR) {
                        alert(data.data);
                        $('#loader').removeClass('overlay');
                        //location.reload();
					},
					error: function (jqXHR, textStatus, errorThrown) {
						alert('failed');
						$('#loader').removeClass('overlay');
						$('.submit').prop('disabled', false);
					}
				});
			}

			$('.submit').click(function (event) {
				SFMCEmailAPI();
			});
		});
	</script>
</body>
</html>
